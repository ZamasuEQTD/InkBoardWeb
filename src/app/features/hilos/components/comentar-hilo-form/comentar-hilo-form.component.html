<div class="w-full px-2 py-2 bg-white border-solid border-t-2 border-gray-300 relative pt-4">
  <form action="" [formGroup]="this.form" (submit)="$event.preventDefault()">

    <app-pick-file-input #fileRef hidden  (onPickedFile)="this.comentarHiloService.agregarMedia($event)"/>

    <input formControlName="spoiler" type="checkbox" #spoilerRef hidden>

    @if (this.media) {

      @if (this.media!.type === 'video' || this.media!.type === 'image' || this.media!.type === 'youtube') {
        <app-spoileable-picked-media [spoiler]="spoiler" [media]="this.media" (onDelete)="this.comentarHiloService.eliminarMedia()" (onSpoiler)="spoilerRef.click()"></app-spoileable-picked-media>
      } 
    }

    <div class="flex flex-row gap-x-2 items-center ">

      <div class="relative flex-1">
          <textarea formControlName="texto"  #myTextareaRef rows="3" name="" id="" placeholder="Escribe tu comentario" class="pl-10 pr-1 w-full"></textarea>

          <button class="icon-button absolute top-1 size-10"  (click)="fileRef.pick()" type="button">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bolt"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><circle cx="12" cy="12" r="4"/></svg>
          </button>
      </div>

      <button class=  "icon-button colored-icon-button p-2" (click)="this.comentarHiloService.comentar()" type="submit">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-7">
          <path d="M3.105 2.288a.75.75 0 0 0-.826.95l1.414 4.926A1.5 1.5 0 0 0 5.135 9.25h6.115a.75.75 0 0 1 0 1.5H5.135a1.5 1.5 0 0 0-1.442 1.086l-1.414 4.926a.75.75 0 0 0 .826.95 28.897 28.897 0 0 0 15.293-7.155.75.75 0 0 0 0-1.114A28.897 28.897 0 0 0 3.105 2.288Z" />
        </svg>
      </button>

    </div>

  </form>

</div>
